<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Julia Set Explorer</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div id="header">
  <button class="header-btn" id="toggle-controls" title="Toggle Controls (Space)">&#9776;</button>
  <h1>Julia Set Explorer</h1>
  <button class="header-btn" id="quiz-btn" title="Fractal Personality Quiz" style="font-size:13px; display:flex; align-items:center; gap:4px;">&#10070; <span style="font-size:12px;">take my quiz :)</span></button>
  <button class="header-btn" id="ach-btn" title="Achievements">&#127942;</button>
  <button class="header-btn" id="info-btn" title="Info (I)">&#9432;</button>
</div>

<div id="app">
  <div id="controls">

    <!-- Fractal Type -->
    <div class="section">
      <div class="section-title">Fractal Type</div>
      <div class="radio-group">
        <label><input type="radio" name="fractalType" value="julia" checked> Julia Set</label>
        <label><input type="radio" name="fractalType" value="mandelbrot"> Mandelbrot Set</label>
        <label><input type="radio" name="fractalType" value="burningship"> Burning Ship</label>
        <label><input type="radio" name="fractalType" value="split"> Split View</label>
      </div>
    </div>

    <!-- Julia Parameters -->
    <div class="section" id="julia-params">
      <div class="section-title">Julia Parameters (c = a + bi)</div>
      <div class="slider-row">
        <label>Real Part (a): <span class="value" id="real-val">-0.70</span></label>
        <input type="range" id="real-slider" min="-2" max="2" step="0.001" value="-0.7">
      </div>
      <div class="slider-row">
        <label>Imaginary Part (b): <span class="value" id="imag-val">0.27</span></label>
        <input type="range" id="imag-slider" min="-2" max="2" step="0.001" value="0.27">
      </div>
    </div>

    <!-- Presets -->
    <div class="section" id="presets-section">
      <div class="section-title">Famous Julia Sets</div>
      <div class="btn-row">
        <button class="preset-btn" data-real="0" data-imag="1">Dendrite</button>
        <button class="preset-btn" data-real="-0.75" data-imag="0.11">Spiral</button>
        <button class="preset-btn" data-real="-0.123" data-imag="0.745">Douady Rabbit</button>
        <button class="preset-btn" data-real="-0.75" data-imag="0">San Marco</button>
        <button class="preset-btn" data-real="-0.8" data-imag="0.156">Dragon</button>
        <button class="preset-btn" data-real="-0.390541" data-imag="-0.586788">Siegel Disk</button>
        <button class="preset-btn" id="random-preset">Random</button>
      </div>
    </div>

    <!-- Color Scheme -->
    <div class="section">
      <div class="section-title">Color Scheme</div>
      <select id="color-scheme">
        <option value="classic">Classic</option>
        <option value="fire">Fire</option>
        <option value="ocean" selected>Ocean</option>
        <option value="electric">Electric</option>
        <option value="grayscale">Grayscale</option>
        <option value="rainbow">Rainbow</option>
        <option value="custom">Custom...</option>
      </select>
    </div>

    <!-- Custom Gradient Editor -->
    <div class="section" id="gradient-editor" style="display:none">
      <div class="section-title">Gradient Editor</div>
      <div id="gradient-preview"></div>
      <div id="gradient-stops"></div>
      <div class="btn-row" style="margin-top:8px">
        <button class="btn" id="add-stop-btn">+ Add Stop</button>
      </div>
      <div style="margin-top:10px; border-top:1px solid rgba(255,0,255,0.15); padding-top:10px">
        <label style="font-size:11px; color:var(--text-dim)">Save Gradient</label>
        <div style="display:flex; gap:6px; margin-top:4px">
          <input type="text" id="gradient-name" placeholder="My Gradient" style="flex:1; padding:4px 8px; background:rgba(26,10,46,0.8); color:var(--neon-cyan); border:1px solid var(--neon-pink); border-radius:4px; font-size:12px;">
          <button class="btn" id="save-gradient-btn">Save</button>
        </div>
        <div id="saved-gradients" style="margin-top:8px"></div>
      </div>
    </div>

    <!-- Rendering Options -->
    <div class="section">
      <div class="section-title">Rendering</div>
      <div class="slider-row">
        <label>Max Iterations: <span class="value" id="iter-val">300</span></label>
        <input type="range" id="iter-slider" min="50" max="2000" step="10" value="300">
      </div>
      <div class="slider-row">
        <label>Escape Radius: <span class="value" id="escape-val">4</span></label>
        <input type="range" id="escape-slider" min="2" max="20" step="0.5" value="4">
      </div>
      <div class="checkbox-row">
        <input type="checkbox" id="smooth-check" checked>
        <label for="smooth-check">Smooth coloring</label>
      </div>
    </div>

    <!-- View Controls -->
    <div class="section">
      <div class="section-title">View Controls</div>
      <div class="btn-row">
        <button class="btn" id="zoom-in-btn">Zoom In</button>
        <button class="btn" id="zoom-out-btn">Zoom Out</button>
        <button class="btn" id="reset-view-btn">Reset View</button>
      </div>
      <div class="checkbox-row" style="margin-top:8px">
        <input type="checkbox" id="show-coords" checked>
        <label for="show-coords">Show coordinates</label>
      </div>
      <div class="checkbox-row">
        <input type="checkbox" id="show-orbit">
        <label for="show-orbit">Show orbit on click</label>
      </div>
      <div class="checkbox-row">
        <input type="checkbox" id="show-itervis">
        <label for="show-itervis">Iteration visualizer</label>
      </div>
    </div>

    <!-- Animation -->
    <div class="section" id="anim-section">
      <div class="section-title">Animation</div>
      <div class="btn-row">
        <button class="btn" id="anim-play">&#9654; Play</button>
        <button class="btn" id="anim-pause">&#9208; Pause</button>
        <button class="btn" id="anim-stop">&#9209; Stop</button>
      </div>
      <div class="checkbox-row" style="margin-top:8px">
        <input type="checkbox" id="music-check" checked>
        <label for="music-check">Music</label>
      </div>
      <div class="slider-row">
        <label>Genre:</label>
        <select id="genre-select">
          <option value="house" selected>House</option>
          <option value="synthwave">Synthwave</option>
          <option value="dnb">Drum & Bass</option>
          <option value="lofi">Lo-fi</option>
          <option value="techno">Techno</option>
        </select>
      </div>
      <div class="slider-row">
        <label>Volume: <span class="value" id="vol-val">60%</span></label>
        <input type="range" id="vol-slider" min="0" max="100" step="1" value="60">
      </div>
      <div class="checkbox-row">
        <input type="checkbox" id="particles-check" checked>
        <label for="particles-check">Particles</label>
      </div>
      <div class="slider-row" style="margin-top:8px">
        <label>Speed: <span class="value" id="speed-val">0.50</span></label>
        <input type="range" id="speed-slider" min="0.05" max="2" step="0.05" value="0.5">
      </div>
      <div class="radio-group" style="margin-top:6px">
        <label><input type="radio" name="animPath" value="circle" checked> Circle</label>
        <label><input type="radio" name="animPath" value="figure8"> Figure-8</label>
        <label><input type="radio" name="animPath" value="morph"> Morph (Tour)</label>
        <label><input type="radio" name="animPath" value="star"> Star</label>
        <label><input type="radio" name="animPath" value="heart"> Heart</label>
      </div>
      <div id="morph-info" style="display:none; margin-top:6px; font-size:11px; color:var(--neon-green); text-shadow:0 0 4px var(--neon-green);">
        <span id="morph-waypoint-name"></span>
      </div>
      <div style="margin-top:8px; border-top:1px solid rgba(255,0,255,0.15); padding-top:8px">
        <div class="checkbox-row">
          <input type="checkbox" id="dj-mode-check">
          <label for="dj-mode-check">DJ Mode</label>
        </div>
        <div id="dj-info" style="display:none; font-size:10px; color:var(--neon-yellow); text-shadow:0 0 4px var(--neon-yellow); margin-top:4px;">
          Drag on canvas to warp c parameter. Music auto-plays.
        </div>
        <div class="checkbox-row">
          <input type="checkbox" id="reactive-colors-check">
          <label for="reactive-colors-check">Reactive colors</label>
        </div>
        <div id="reactive-info" style="display:none; font-size:10px; color:var(--neon-cyan); text-shadow:0 0 4px var(--neon-cyan); margin-top:4px;">
          Colors shift with the beat. Best with music on.
        </div>
      </div>
    </div>

    <!-- Export -->
    <div class="section">
      <div class="section-title">Export</div>
      <div class="btn-row">
        <button class="btn" id="save-btn">Save Image (PNG)</button>
        <button class="btn" id="copy-params-btn">Copy Parameters</button>
      </div>
    </div>

  </div>

  <!-- Canvas -->
  <div id="canvas-container">
    <canvas id="fractal-canvas"></canvas>
    <!-- Split view canvas (hidden by default) -->
    <canvas id="split-canvas" style="display:none; position:absolute; top:0; left:0; width:50%; height:100%;"></canvas>
    <div class="overlay" id="coords-overlay">Move mouse over canvas</div>
    <div class="overlay" id="zoom-overlay">Zoom: 1.00x</div>
    <div class="overlay" id="info-overlay" style="display:none"></div>
    <div id="loading"><div class="spinner"></div></div>
    <div id="orbit-panel"></div>
    <!-- Iteration Visualizer Panel -->
    <canvas id="particle-canvas"></canvas>
    <div id="dj-indicator"><div class="dj-title">DJ MODE</div><div class="dj-sub">Drag to warp &bull; Press D to exit</div></div>
    <div id="dj-crosshair"></div>
    <div id="itervis-panel">
      <div id="itervis-header">
        <strong>Iteration Visualizer</strong>
        <button id="itervis-close">&times;</button>
      </div>
      <div id="itervis-formula"></div>
      <div id="itervis-controls">
        <button class="btn" id="itervis-reset" title="Reset">&#9209;</button>
        <button class="btn" id="itervis-step" title="Step">&#9654;|</button>
        <button class="btn" id="itervis-play" title="Play/Pause">&#9654;</button>
        <button class="btn" id="itervis-fast" title="Play Fast">&#9654;&#9654;</button>
        <span id="itervis-stepnum">Step 0</span>
      </div>
      <div id="itervis-details">
        <div id="itervis-current"></div>
        <div id="itervis-list-wrap">
          <table id="itervis-list">
            <thead><tr><th>#</th><th>z</th><th>|z|</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Info Panel -->
<div id="info-panel">
  <button class="close-btn" id="close-info">&times;</button>
  <h2>Julia Set Explorer</h2>
  <h3>What are Julia Sets?</h3>
  <p>For a complex constant <code>c</code>, the Julia set is the boundary of points <code>z</code> where the iteration <code>z = z&sup2; + c</code> remains bounded. Points that escape to infinity are colored based on how quickly they escape.</p>
  <h3>The Mandelbrot Connection</h3>
  <p>The Mandelbrot set is the "map" of all Julia sets. Each point <code>c</code> in the Mandelbrot set corresponds to a connected Julia set. Use Split View to explore this relationship interactively!</p>
  <h3>Keyboard Shortcuts</h3>
  <p>
    <kbd>Space</kbd> Toggle controls &nbsp;
    <kbd>R</kbd> Reset view &nbsp;
    <kbd>S</kbd> Save image &nbsp;
    <kbd>A</kbd> Toggle animation &nbsp;
    <kbd>M</kbd> Cycle animation path &nbsp;
    <kbd>D</kbd> Toggle DJ mode &nbsp;
    <kbd>I</kbd> Toggle info &nbsp;
    <kbd>+/-</kbd> Zoom &nbsp;
    <kbd>Arrows</kbd> Pan &nbsp;
    <kbd>1-6</kbd> Presets
  </p>
  <h3>Mouse Controls</h3>
  <p>
    <strong>Drag</strong> to pan &bull;
    <strong>Scroll</strong> to zoom &bull;
    <strong>Double-click</strong> to zoom in 2x &bull;
    <strong>Click</strong> (with orbit on) to see iteration path
  </p>
</div>

<!-- Quiz Overlay -->
<div id="quiz-overlay">
  <div id="quiz-box">
    <div id="quiz-content"></div>
  </div>
</div>

<!-- Achievement Toast -->
<div id="achievement-toast">
  <span class="ach-icon"></span>
  <div class="ach-label">Achievement Unlocked</div>
  <div class="ach-name"></div>
  <div class="ach-desc"></div>
</div>

<!-- Achievement Panel -->
<div id="achievements-panel">
  <button class="close-btn" id="close-ach">&times;</button>
  <h2>Achievements</h2>
  <div class="ach-grid" id="ach-grid"></div>
  <div id="ach-progress"></div>
</div>

<script src="script.js"></script>
</body>
</html>
