<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nap or Grind? - Decision Neuron</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <h1 class="header-title">Nap or Grind?</h1>
    <div class="header-actions">
      <button id="mission-btn" class="header-btn" title="Mission">Mission</button>
      <button id="mute-btn" class="header-btn" title="Toggle Sound">&#x1f50a;</button>
    </div>
  </header>

  <!-- Mission Modal -->
  <div id="mission-modal" class="modal-overlay hidden">
    <div class="modal">
      <h2>Mission</h2>
      <p>This single neuron decides: <strong>should you nap or grind?</strong></p>
      <p>Adjust your current state with the sliders. The neuron computes a weighted sum, passes it through a sigmoid, and outputs a probability.</p>
      <p>In <strong>Training Mode</strong>, click the boundary plot to place labeled points, then train the neuron to learn your decision style!</p>
      <button class="modal-close" onclick="document.getElementById('mission-modal').classList.add('hidden')">Got it!</button>
    </div>
  </div>

  <!-- Connection Lines Canvas -->
  <canvas id="connection-canvas"></canvas>

  <!-- 3-Column Hero: Left inputs | Neuron | Right inputs -->
  <section class="hero-grid" id="hero-grid">
    <!-- Left: Nap-leaning inputs (positive weights) -->
    <div class="side-inputs side-left">
      <h3 class="side-title">Nap factors</h3>

      <div class="input-group" data-input="tiredness">
        <div class="input-header">
          <label>Tiredness</label>
          <span class="weight-badge positive">w: +0.85</span>
        </div>
        <div class="slider-row">
          <span class="slider-label-left">Fresh</span>
          <input type="range" min="0" max="100" value="50" class="slider" id="slider-tiredness">
          <span class="slider-label-right">Exhausted</span>
        </div>
        <div class="input-value" id="value-tiredness">0.50</div>
        <div class="contribution-label" id="contrib-tiredness">+0.425</div>
      </div>

      <div class="input-group" data-input="timeSinceSlept">
        <div class="input-header">
          <label>Hours Since Sleep</label>
          <span class="weight-badge positive">w: +0.75</span>
        </div>
        <div class="slider-row">
          <span class="slider-label-left">Just woke up</span>
          <input type="range" min="0" max="100" value="50" class="slider" id="slider-timeSinceSlept">
          <span class="slider-label-right">24h+ ago</span>
        </div>
        <div class="input-value" id="value-timeSinceSlept">0.50</div>
        <div class="contribution-label" id="contrib-timeSinceSlept">+0.375</div>
      </div>

      <div class="input-group" data-input="stress">
        <div class="input-header">
          <label>Stress Level</label>
          <span class="weight-badge positive">w: +0.50</span>
        </div>
        <div class="slider-row">
          <span class="slider-label-left">Zen</span>
          <input type="range" min="0" max="100" value="50" class="slider" id="slider-stress">
          <span class="slider-label-right">Spiraling</span>
        </div>
        <div class="input-value" id="value-stress">0.50</div>
        <div class="contribution-label" id="contrib-stress">+0.250</div>
      </div>
    </div>

    <!-- Center: Neuron -->
    <div class="neuron-hero" id="neuron-hero">
      <div class="neuron-ring" id="neuron-ring"></div>
      <div class="neuron-circle" id="neuron-circle">
        <span class="neuron-pct" id="neuron-pct">50%</span>
      </div>
      <div class="neuron-decision" id="neuron-decision">Nap</div>
      <div class="neuron-flavor" id="neuron-flavor">It's honestly 50/50</div>
    </div>

    <!-- Right: Grind-leaning inputs (negative weights) -->
    <div class="side-inputs side-right">
      <h3 class="side-title">Grind factors</h3>

      <div class="input-group" data-input="urgency">
        <div class="input-header">
          <label>Deadline Pressure</label>
          <span class="weight-badge negative">w: -0.90</span>
        </div>
        <div class="slider-row">
          <span class="slider-label-left">No rush</span>
          <input type="range" min="0" max="100" value="50" class="slider" id="slider-urgency">
          <span class="slider-label-right">Due now!</span>
        </div>
        <div class="input-value" id="value-urgency">0.50</div>
        <div class="contribution-label" id="contrib-urgency">-0.450</div>
      </div>

      <div class="input-group" data-input="workLength">
        <div class="input-header">
          <label>Work Length</label>
          <span class="weight-badge negative">w: -0.40</span>
        </div>
        <div class="slider-row">
          <span class="slider-label-left">15 min</span>
          <input type="range" min="0" max="100" value="50" class="slider" id="slider-workLength">
          <span class="slider-label-right">All night</span>
        </div>
        <div class="input-value" id="value-workLength">0.50</div>
        <div class="contribution-label" id="contrib-workLength">-0.200</div>
      </div>
    </div>
  </section>

  <!-- Bias + Presets row -->
  <section class="below-hero">
    <div class="bias-bar">
      <label class="bias-label">Baseline Sleepiness</label>
      <input type="range" min="-100" max="100" value="25" class="slider bias-slider" id="slider-bias">
      <span class="bias-value" id="value-bias">+0.25</span>
    </div>

    <div class="presets">
      <button class="preset-btn" id="scenarios-btn">Try a Scenario</button>
    </div>
  </section>

  <!-- Scenarios Modal -->
  <div id="scenarios-modal" class="modal-overlay hidden">
    <div class="modal scenarios-modal">
      <div class="scenarios-header">
        <h2>Pick a Scenario</h2>
        <button class="scenarios-close" id="scenarios-close">&times;</button>
      </div>
      <p class="scenarios-subtitle">Choose a situation and see what the neuron decides.</p>
      <div class="scenarios-grid" id="scenarios-grid"></div>
    </div>
  </div>

  <!-- Toggles row -->
  <section class="toggles-row">
    <!-- Toggle: Network Diagram -->
    <div class="toggle-section" id="toggle-viz">
      <button class="toggle-btn" onclick="toggleSection('toggle-viz')">
        Network Diagram
        <span class="toggle-chevron">&#9660;</span>
      </button>
      <div class="toggle-content">
        <div class="viz-container">
          <canvas id="nn-canvas" width="460" height="260"></canvas>
        </div>
      </div>
    </div>

    <!-- Toggle: Decision Boundary Visualizer (Heatmap) -->
    <div class="toggle-section" id="toggle-heatmap">
      <button class="toggle-btn" onclick="toggleSection('toggle-heatmap')">
        Decision Boundary Visualizer
        <span class="toggle-chevron">&#9660;</span>
      </button>
      <div class="toggle-content">
        <section class="panel panel-center">
          <div class="heatmap-section">
            <div class="heatmap-controls">
              <label class="heatmap-label">Axes:</label>
              <select id="heatmap-axis-select" class="heatmap-select">
                <option value="timeSinceSlept,stress">Hours Since Sleep vs Stress</option>
                <option value="tiredness,stress">Tiredness vs Stress</option>
                <option value="tiredness,urgency">Tiredness vs Deadline Pressure</option>
                <option value="timeSinceSlept,urgency">Hours Since Sleep vs Deadline Pressure</option>
                <option value="tiredness,workLength">Tiredness vs Work Length</option>
                <option value="stress,urgency">Stress vs Deadline Pressure</option>
                <option value="timeSinceSlept,workLength">Hours Since Sleep vs Work Length</option>
                <option value="stress,workLength">Stress vs Work Length</option>
                <option value="tiredness,timeSinceSlept">Tiredness vs Hours Since Sleep</option>
                <option value="urgency,workLength">Deadline Pressure vs Work Length</option>
              </select>
            </div>
            <div class="heatmap-wrapper">
              <canvas id="heatmap-canvas" width="400" height="400"></canvas>
            </div>
            <div class="heatmap-axis-labels">
              <span class="heatmap-x-label" id="heatmap-x-label">Hours Since Sleep</span>
            </div>
            <div class="heatmap-held" id="heatmap-held"></div>
          </div>
        </section>
      </div>
    </div>

    <!-- Toggle: Decision Boundary + Training -->
    <div class="toggle-section" id="toggle-boundary">
      <button class="toggle-btn" onclick="toggleSection('toggle-boundary')">
        Decision Boundary &amp; Training
        <span class="toggle-chevron">&#9660;</span>
      </button>
      <div class="toggle-content">
        <section class="panel panel-center">
          <div class="boundary-section">
            <div class="boundary-axes-labels">
              <span class="axis-label-y">Stress: Zen &uarr; Spiraling</span>
            </div>
            <div class="boundary-wrapper">
              <canvas id="boundary-canvas" width="400" height="400"></canvas>
            </div>
            <div class="axis-label-x">Just woke up &larr; Hours Since Sleep &rarr; Running on fumes</div>
            <div class="held-inputs" id="held-inputs"></div>
          </div>

          <div class="training-controls">
            <div class="label-toggle">
              <button class="label-btn active" id="label-nap" data-label="1">Nap</button>
              <button class="label-btn" id="label-grind" data-label="0">Grind</button>
            </div>
            <div class="train-buttons">
              <button class="train-btn" id="btn-step">Step</button>
              <button class="train-btn" id="btn-train">Train</button>
              <button class="train-btn" id="btn-reset">Reset</button>
            </div>
          </div>

          <div class="training-stats" id="training-stats">
            <span>Steps: <strong id="stat-steps">0</strong></span>
            <span>Accuracy: <strong id="stat-accuracy">--</strong></span>
            <span>Points: <strong id="stat-points">0</strong></span>
          </div>

          <div class="milestone-banner hidden" id="milestone-banner"></div>
        </section>
      </div>
    </div>

    <!-- Toggle: Two-Neuron Chain -->
    <div class="toggle-section" id="toggle-chain">
      <button class="toggle-btn" onclick="toggleSection('toggle-chain')">
        Two-Neuron Chain
        <span class="toggle-chevron">&#9660;</span>
      </button>
      <div class="toggle-content">
        <div class="chain-container">
          <!-- Neuron 1 Summary -->
          <div class="chain-n1">
            <div class="chain-neuron-label">Neuron 1</div>
            <div class="chain-n1-inputs" id="chain-n1-inputs"></div>
            <div class="chain-n1-output">
              <div class="chain-mini-neuron nap" id="chain-n1-circle">
                <span id="chain-n1-pct">50%</span>
              </div>
              <div class="chain-val-label">a<sub>1</sub> = <span id="chain-n1-a">0.500</span></div>
            </div>
          </div>

          <!-- Chain Synapse -->
          <div class="chain-synapse">
            <canvas id="chain-canvas" width="200" height="200"></canvas>
            <div class="chain-weight-control">
              <label class="chain-weight-label">Chain Weight</label>
              <input type="range" min="-100" max="100" value="80" class="slider chain-slider" id="slider-chainWeight">
              <span class="chain-weight-value" id="value-chainWeight">+0.80</span>
            </div>
          </div>

          <!-- Neuron 2 -->
          <div class="chain-n2">
            <div class="chain-neuron-label">Neuron 2</div>
            <div class="chain-n2-inputs">
              <div class="chain-input-group">
                <div class="chain-input-header">
                  <label>Budget Available</label>
                  <span class="weight-badge negative">w: -0.60</span>
                </div>
                <div class="slider-row">
                  <span class="slider-label-left">Broke</span>
                  <input type="range" min="0" max="100" value="50" class="slider chain-grind-slider" id="slider-budget">
                  <span class="slider-label-right">Loaded</span>
                </div>
                <div class="input-value" id="value-budget">0.50</div>
              </div>

              <div class="chain-input-group">
                <div class="chain-input-header">
                  <label>Partner Approval</label>
                  <span class="weight-badge negative">w: -0.70</span>
                </div>
                <div class="slider-row">
                  <span class="slider-label-left">Solo</span>
                  <input type="range" min="0" max="100" value="50" class="slider chain-grind-slider" id="slider-partner">
                  <span class="slider-label-right">Team ready</span>
                </div>
                <div class="input-value" id="value-partner">0.50</div>
              </div>

              <div class="chain-bias-row">
                <label class="bias-label">Bias b<sub>2</sub></label>
                <input type="range" min="-100" max="100" value="10" class="slider chain-slider" id="slider-n2Bias">
                <span class="bias-value" id="value-n2Bias">+0.10</span>
              </div>
            </div>

            <div class="chain-n2-output">
              <div class="chain-mini-neuron nap" id="chain-n2-circle">
                <span id="chain-n2-pct">50%</span>
              </div>
              <div class="chain-decision" id="chain-n2-decision">Nap</div>
              <div class="chain-flavor" id="chain-n2-flavor">Final output</div>
            </div>
          </div>
        </div>

        <!-- Chain Math -->
        <div class="chain-math">
          <div class="chain-math-stage">
            <div class="chain-math-title">Neuron 1</div>
            <div class="chain-math-line">z<sub>1</sub> = &Sigma;(x<sub>i</sub> &middot; w<sub>i</sub>) + b<sub>1</sub> = <span class="chain-math-val" id="chain-math-z1">0.000</span></div>
            <div class="chain-math-line">a<sub>1</sub> = &sigma;(z<sub>1</sub>) = <span class="chain-math-val" id="chain-math-a1">0.500</span></div>
          </div>
          <div class="chain-math-arrow">&rarr;</div>
          <div class="chain-math-stage">
            <div class="chain-math-title">Neuron 2</div>
            <div class="chain-math-line">z<sub>2</sub> = w<sub>chain</sub>&middot;a<sub>1</sub> + w<sub>6</sub>&middot;x<sub>6</sub> + w<sub>7</sub>&middot;x<sub>7</sub> + b<sub>2</sub> = <span class="chain-math-val" id="chain-math-z2">0.000</span></div>
            <div class="chain-math-line">output = &sigma;(z<sub>2</sub>) = <span class="chain-math-val" id="chain-math-a2">0.500</span></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Toggle: Activation Function Showdown -->
    <div class="toggle-section" id="toggle-activation">
      <button class="toggle-btn" onclick="toggleSection('toggle-activation')">
        Activation Function Showdown
        <span class="toggle-chevron">&#9660;</span>
      </button>
      <div class="toggle-content">
        <div class="activation-container">
          <!-- Function Selector -->
          <div class="activation-selector">
            <button class="activation-btn active" data-fn="sigmoid">Sigmoid</button>
            <button class="activation-btn" data-fn="step">Step Function</button>
            <button class="activation-btn" data-fn="relu">ReLU</button>
          </div>
          <div class="activation-era" id="activation-era">Classic &mdash; smooth gradient, used everywhere</div>

          <!-- Function Curve Canvas -->
          <div class="activation-plot-wrapper">
            <canvas id="activation-canvas" width="500" height="280"></canvas>
          </div>

          <!-- Comparison Mode Toggle -->
          <label class="activation-compare-toggle">
            <input type="checkbox" id="activation-compare"> Compare all three
          </label>

          <!-- Live Math Display -->
          <div class="activation-math" id="activation-math">
            <div class="activation-math-formula" id="activation-formula">&sigma;(z) = 1 / (1 + e<sup>-z</sup>)</div>
            <div class="activation-math-values">
              <span>z = <strong id="activation-z">0.000</strong></span>
              <span>output = <strong id="activation-output">0.500</strong></span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Toggle: About This Project -->
    <div class="toggle-section" id="toggle-about">
      <button class="toggle-btn" onclick="toggleSection('toggle-about')">
        About This Project
        <span class="toggle-chevron">&#9660;</span>
      </button>
      <div class="toggle-content">
        <div class="about-card">
          <p>This was built for my vibe coding class. The assignment was to create a single-neuron classifier that takes real inputs and makes a binary decision using a sigmoid activation function.</p>
          <p>I chose the most relatable decision in student life: <strong>should I nap or actually do my work?</strong></p>
          <p>The neuron takes 5 inputs about your current state, multiplies each by a learned weight, adds a bias, and passes the sum through a sigmoid to get a probability. You can also train it by placing points on the decision boundary plot and watching the weights update in real time.</p>
        </div>
      </div>
    </div>

    <!-- Toggle: Math Panel -->
    <div class="toggle-section" id="toggle-math">
      <button class="toggle-btn" onclick="toggleSection('toggle-math')">
        The Math
        <span class="toggle-chevron">&#9660;</span>
      </button>
      <div class="toggle-content">
        <section class="panel panel-math">
          <div class="math-formula">
            <div class="formula-line">z = &Sigma;(x<sub>i</sub> &middot; w<sub>i</sub>) + b</div>
            <div class="formula-line">output = &sigma;(z) = 1/(1 + e<sup>-z</sup>)</div>
          </div>
          <div class="math-separator"></div>
          <div class="math-terms" id="math-terms"></div>
          <div class="math-separator"></div>
          <div class="math-result">
            <div class="math-z">z = <span id="math-z">0.000</span></div>
            <div class="math-sigma">&sigma;(z) = <span id="math-sigma">0.500</span></div>
          </div>
        </section>
      </div>
    </div>
  </section>

  <!-- Confetti Canvas -->
  <canvas id="confetti-canvas"></canvas>

  <script src="neuron.js"></script>
  <script src="viz.js"></script>
  <script src="heatmap.js"></script>
  <script src="boundary.js"></script>
  <script src="chain.js"></script>
  <script src="activation.js"></script>
  <script src="main.js"></script>
</body>
</html>
